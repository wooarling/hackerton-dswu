{% load static %} 
<!DOCTYPE html> 
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì‹œíŒ</title>
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/layout.css' %}">
    <link rel="stylesheet" href="{% static 'css/card.css' %}">
</head>
<body>
    <!-- í—¤ë” -->
    <header class="layout-header">
        <div class="header_logo">LOGO</div>
        <!-- ê²€ìƒ‰ì°½ -->
        <div class="header-center">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
                <button id="searchBtn" aria-label="ê²€ìƒ‰">ğŸ”</button>
            </div>
        </div>
        <!-- ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ -->
        <div class="header-user">
            {% if request.user.is_authenticated %}
                {{ request.user.username }}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤! | 
                <a href="{% url 'accounts:logout' %}">ë¡œê·¸ì•„ì›ƒ</a> 
            {% else %}
                <a href="{% url 'accounts:login_page' %}">ë¡œê·¸ì¸</a>
            {% endif %}
        </div>
    </header>

    <div class="layout-body">
        <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
        <nav class="layout-sidebar">
            <nav class="header_menu_area">
                <a href="{% url 'board:followed_posts' %}" class="header_menu_item">íŒ”ë¡œìš°í•œ ê¸€</a>
                <a href="{% url 'board:popular_posts' %}" class="header_menu_item">í˜„ì¬ ì¸ê¸°ê¸€</a>
            </nav>
            <div class="menu-divider"></div>
            <nav class="board-menu">
                <li><a href="{% url 'board:post_list_category' category='frontend' %}" class="board-link">> í”„ë¡ íŠ¸ì—”ë“œ ê²Œì‹œíŒ</a></li>
                <li><a href="{% url 'board:post_list_category' category='game' %}" class="board-link">> ê²Œì„ ê°œë°œ ê²Œì‹œíŒ</a></li>
                <li><a href="{% url 'board:post_list_category' category='iot' %}" class="board-link">> ì‚¬ë¬¼ì¸í„°ë„· ê²Œì‹œíŒ</a></li>
                <li><a href="{% url 'board:post_list_category' category='bigdata' %}" class="board-link">> ë¹…ë°ì´í„° ê²Œì‹œíŒ</a></li>
                <li><a href="{% url 'board:post_list_category' category='ai' %}" class="board-link">> ì¸ê³µì§€ëŠ¥ ê²Œì‹œíŒ</a></li>
                <li><a href="{% url 'board:my_posts' %}" class="board-link">> ë‚´ê°€ ì“´ ê¸€</a></li>
                <li><a href="{% url 'board:my_scraps' %}" class="board-link">> ë‚´ê°€ ìŠ¤í¬ë©í•œ ê¸€</a></li>
            </nav>
            <div class="sidebar-bottom">
                <a href="{% url 'it_test:main_page' %}" class="bottom-button">
                    <span class="text">ğŸ“„ ì§ë¬´ ì ì„± í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ ê°€ê¸° â”</span>
                </a>
            </div>
        </nav>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="layout-content">
            <div class="board-header">
                <h1>
                    {% if category %}
                        {{ category }} ê²Œì‹œíŒ
                    {% else %}
                        ì „ì²´ ê²Œì‹œíŒ
                    {% endif %}
                </h1>
                {% if request.user.is_authenticated %}
                    <a href="{% url 'board:post_create' %}" class="write-button">ìƒˆ ê¸€ ì‘ì„±</a>
                {% endif %}
            </div>

            <!-- ë‚´ê°€ ì“´ ê¸€ -->
            {% if request.path == '/board/my_posts/' %}
                <h2 class="section-title">âœï¸ ë‚´ê°€ ì“´ ê¸€</h2>
                {% if my_posts %}
                    {% for post in my_posts %}
                        <div class="post-card">
                            <div class="post-card-category">{{ post.get_category_display }}</div>
                            <div class="post-card-title">
                                <a href="{% url 'board:post_detail' post.pk %}">{{ post.title }}</a>
                            </div>
                            <p> ì‘ì„±ì: {% if post.is_anonymous %}ìµëª…{% else %}{{ post.user.username }}{% endif %} | ì¢‹ì•„ìš”: {{ post.likes.count }} </p>
                            <div class="post-card-info">
                                <span>ğŸ’¬ {{ post.comment_set.count }}</span>
                                <span>ğŸ‘ {{ post.likes.count }}</span>
                                <span>ì‘ì„±ì¼: {{ post.created_at|date:"Y-m-d H:i" }}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>ì•„ì§ ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            {% elif request.path == '/board/my_scraps/' %}
                <h2 class="section-title">ğŸ“Œ ë‚´ê°€ ìŠ¤í¬ë©í•œ ê¸€</h2>
                {% if scraps %}
                    {% for post in scraps %}
                        <div class="post-card">
                            <div class="post-card-category">{{ post.get_category_display }}</div>
                            <div class="post-card-title">
                                <a href="{% url 'board:post_detail' post.pk %}">{{ post.title }}</a>
                            </div>
                            <p> ì‘ì„±ì: {% if post.is_anonymous %}ìµëª…{% else %}{{ post.user.username }}{% endif %} | ì¢‹ì•„ìš”: {{ post.likes.count }} </p>
                            <div class="post-card-info">
                                <span>ğŸ’¬ {{ post.comment_set.count }}</span>
                                <span>ğŸ‘ {{ post.likes.count }}</span>
                                <span>ì‘ì„±ì¼: {{ post.created_at|date:"Y-m-d H:i" }}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>ì•„ì§ ìŠ¤í¬ë©í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            {% elif request.path == '/board/my_comments/' %}
                <h2 class="section-title">ğŸ’¬ ë‚´ê°€ ì“´ ëŒ“ê¸€</h2>
                {% if comments %}
                    {% for comment in comments %}
                        <div class="post-card">
                            <div class="post-card-category">{{ comment.post.get_category_display }} â€¢ <a href="{% url 'board:post_detail' comment.post.pk %}">{{ comment.post.title }}</a> </div>
                            <div class="post-card-title">
                                {% if comment.is_anonymous %} ìµëª… {% else %} {{ comment.user.username }} {% endif %}
                            </div>
                            <p>{{ comment.content|truncatechars:120 }}</p>
                            <div class="post-card-info">
                                <span>ğŸ‘ {{ comment.like_count }}</span>
                                <span>ì‘ì„±ì¼: {{ comment.created_at|date:"Y-m-d H:i" }}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>ì•„ì§ ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            {% else %}
                <!-- ì „ì²´ ê²Œì‹œíŒ ë˜ëŠ” ì¹´í…Œê³ ë¦¬ ê²Œì‹œíŒ -->
                {% if posts %}
                    {% for post in posts %}
                        <div class="post-card">
                            <div class="post-card-category">{{ post.get_category_display }}</div>
                            <div class="post-card-title">
                                <a href="{% url 'board:post_detail' post.pk %}">{{ post.title }}</a>
                            </div>
                            <p> ì‘ì„±ì: {% if post.is_anonymous %}ìµëª…{% else %}{{ post.user.username }}{% endif %} | ì¢‹ì•„ìš”: {{ post.likes.count }} </p>
                            <div class="post-card-info">
                                <span>ğŸ’¬ {{ post.comment_set.count }}</span>
                                <span>ğŸ‘ {{ post.likes.count }}</span>
                                <span>ì‘ì„±ì¼: {{ post.created_at|date:"Y-m-d H:i" }}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            {% endif %}
        </main>
    </div>
</body>
</html>

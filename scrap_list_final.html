{% extends "base.html" %}

{% block title %}스크랩한 글{% endblock %}

{% block content %}
<h1 class="page-title" style="display:flex; align-items:center; gap:6px;">

    
    <svg width="42" height="42" viewBox="0 0 24 24" fill="none">
        <path d="M6 3C5.44772 3 5 3.44772 5 4V20.382C5 21.4045 6.07714 22.0782 6.96455 21.5827L11.0355 19.3093C11.6384 18.9739 12.3616 18.9739 12.9645 19.3093L17.0355 21.5827C17.9229 22.0782 19 21.4045 19 20.382V4C19 3.44772 18.5523 3 18 3H6Z" fill="#0217c2"/>
    </svg>
    

    스크랩한 글
</h1>
<style>
/* 카드 전체 스타일 */
.post-card {
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 18px;
    margin-bottom: 16px;
    background-color: #fff;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    transition: transform 0.2s, box-shadow 0.2s;
}

.post-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* 카테고리 */
.post-card-category {
    font-size: 12px;
    display: inline-block;
    padding: 4px 8px;
    border-radius: 6px;
    background-color: #eef1ff;
    color: #2f3ecf;
    margin-bottom: 8px;
    font-weight: 600;
}

/* 제목 */
.post-card-title {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 12px;
}

.post-card-title a {
    text-decoration: none;
    color: #000;
}

.post-card-title a:hover {
    color: #007bff;
}

/* 작성자 & 좋아요 */
.post-card p {
    font-size: 14px;
    color: #444;
    margin: 4px 0;
}

/* 카드 하단 정보 */
.post-card-info {
   display: flex;
   gap: 18px;
   font-size: 13px;
   color: #7a7a7a;
}

.post-card-info span {
   display: flex;
   align-items: center;
   gap: 4px;
}

.post-card form button {
    margin-top: 8px;
    padding: 4px 10px;
    border: 1px solid #2f3ecf;
    border-radius: 6px;
    background-color: #eef1ff;
    color: #2f3ecf;
    font-size: 13px;
    cursor: pointer;
}

.post-card form button:hover {
    background-color: #dbe0ff;
}
</style>

{% if scraps %}
    {% for post in scraps %}
    <div class="post-card">

        <div class="post-card-category">
            {{ post.get_category_display }}
        </div>

        <div class="post-card-title">
            <a href="{% url 'board:post_detail' post.pk %}">
                {{ post.title }}
            </a>
        </div>

        <p>
            작성자: 
            {% if post.is_anonymous %}
                익명
            {% else %}
                {{ post.user.username }}
            {% endif %}
            | 좋아요: {{ post.like_count }}
        </p>

        <div class="post-card-info">
            <span>
    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_70_183)">
            <path d="M3.5 5.5L5.5 1C5.89782 1 6.27936 1.15804 6.56066 1.43934C6.84196 1.72064 7 2.10218 7 2.5V4.5H9.83C9.97495 4.49836 10.1185 4.52825 10.2508 4.58761C10.383 4.64697 10.5008 4.73437 10.5959 4.84376C10.6911 4.95315 10.7613 5.08191 10.8017 5.22113C10.8421 5.36034 10.8518 5.50668 10.83 5.65L10.14 10.15C10.1038 10.3885 9.98272 10.6058 9.79895 10.762C9.61519 10.9182 9.38116 11.0027 9.14 11H3.5M3.5 5.5V11M3.5 5.5H2C1.73478 5.5 1.48043 5.60536 1.29289 5.79289C1.10536 5.98043 1 6.23478 1 6.5V10C1 10.2652 1.10536 10.5196 1.29289 10.7071C1.48043 10.8946 1.73478 11 2 11H3.5" 
            stroke="#BA1A1A" stroke-opacity="0.4" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
    </svg>

    {{ post.like_count }}
</span>

            <span>
    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.5 7.5C1.5 7.76522 1.60536 8.01957 1.79289 8.20711C1.98043 8.39464 2.23478 8.5 2.5 8.5H8.5L10.5 10.5V2.5C10.5 2.23478 10.3946 1.98043 10.2071 1.79289C10.0196 1.60536 9.76522 1.5 9.5 1.5H2.5C2.23478 1.5 1.98043 1.60536 1.79289 1.79289C1.60536 1.98043 1.5 2.23478 1.5 2.5V7.5Z" 
        stroke="#000477" stroke-opacity="0.37" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    {{ post.comment_set.count }}
</span>
            <span>작성일: {{ post.date|date:"Y-m-d H:i" }}</span>
        </div>

         <!-- 스크랩 토글 -->
        <form action="{% url 'board:post_scrap_toggle' post.pk %}" method="post" style="display:inline;">
            {% csrf_token %}
            {% if user in post.scraps.all %}
                <button type="submit">스크랩 취소</button>
            {% else %}
                <button type="submit">스크랩</button>
            {% endif %}
        </form>

    </div>
    {% endfor %}
{% else %}
    <p>아직 스크랩한 글이 없습니다.</p>
{% endif %}

{% endblock %}

